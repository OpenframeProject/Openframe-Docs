<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Openframe Development Environment Setup</title>
    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,300italic,400italic,700,700italic,900' rel='stylesheet' type='text/css'>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all.js"></script>
    <link href="../images/favicon.ico" rel="icon" type="image/ico" />
  </head>

  <body class="dev-env-setup dev-env-setup_index" data-languages="[&quot;Terminal&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a href="/"><img src="../images/of-logo.svg" alt="Of logo" /></a>
        <div class="lang-selector">
              <a href="#" data-language-name="Terminal">Terminal</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='/frame-setup-guide'>Frame Setup Guide</a></li>
            <li><a href='/dev-env-setup'>Dev Environment Setup</a></li>
            <li><a href='https://api.openframe.io/explorer'>REST API Docs</a></li>
            <li><a href='/js-client'>JS Client</a></li>
            <li><a href='https://github.com/OpenframeProject'>Openframe on Github</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="openframe-development-environment">Openframe Development Environment</h1>

<p>If you&rsquo;re planning to hack on Openframe, you&rsquo;ll want to set up a dev environment which makes it easy to update code and see the results right away. Openframe uses familiar tools like GitHub, Node, and NPM, and we&rsquo;ll use some of the standard development practices of these tools to get setup.</p>

<p>This guide is for people developing on the Raspberry Pi. Here we&rsquo;ll describe setting up an environment suitable for working on the <a href="https://github.com/OpenframeProject/Openframe">Openframe frame controller</a> and modifying or developing new extensions. This setup will still use the public Openframe server, so you can use your account at <a href="http://openframe.io">openframe.io</a> to add and push artwork to your modified frame.</p>

<h1 id="tl-dr">TL;DR</h1>

<ol>
<li>Create an Openframe-ready SD Card following the <a href="http://docs.openframe.io/frame-setup-guide">Frame Setup Guide</a>. <a href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">Enable SSH</a> and, optionally, <a href="http://openframeworks.cc/setup/raspberrypi/raspberry-pi-smb/">setup Samba</a>.</li>
<li>Fork the <a href="https://github.com/OpenframeProject/Openframe">Openframe repo</a>, and any extension repos you plan to work on / mess around with.</li>
<li>On the Pi, clone each forked repo, and <code class="prettyprint">npm install</code> their dependencies.</li>
<li>In each of the extension repos, use <code class="prettyprint">npm link</code> to create a global symbolic link for this npm package</li>
<li>In the Openframe repo, use <code class="prettyprint">npm link [extension-a-package-name] [extension-b-package-name]</code>, passing each linked extension package name.</li>
<li>In the Openframe repo, run <code class="prettyprint">npm start</code>. Now Openframe is running from the source code, using the source code of the extensions.</li>
<li>Get to work. You can SSH into the Pi and edit files directly there, or use Samba to mount the files on your computer and work on them with your favorite editor.</li>
</ol>

<h1 id="the-long-version">The Long Version</h1>

<h2 id="create-an-openframe-sd-card">Create an Openframe SD Card</h2>

<p>In order to make sure the Pi has all of the necessary dependencies installed, the simplest thing to do is to set up an SD Card following the <a href="http://docs.openframe.io/frame-setup-guide">Frame Setup Guide</a>. Make sure you&rsquo;ve got an Openframe account and that you can log in and push artwork to your frame. You probably don&rsquo;t want to enable &lsquo;autoboot to Openframe&rsquo;, since you&rsquo;ll be launching Openframe yourself.</p>

<p>It&rsquo;s helpful to <a href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">enable SSH</a> on the Pi so that you can edit files remotely. If you&rsquo;re comfortable setting up and using vim (or whatever editor) on the Pi and doing your development work there, that&rsquo;s fine. If you&rsquo;d prefer to use your usual editor, you can use Samba to mount the Pi&rsquo;s file system on your computer and edit the files directly.</p>

<p>There&rsquo;s <a href="http://openframeworks.cc/setup/raspberrypi/raspberry-pi-smb/">a good tutorial on setting up Samba</a> on the openFrameworks site.</p>

<h2 id="fork-the-openframe-repo">Fork the Openframe Repo</h2>

<p>You&rsquo;ll want to fork the <a href="https://github.com/OpenframeProject/Openframe">Openframe repo</a> to your own GitHub account. This way you&rsquo;ll be able to keep track of your work and contribute bug fixes or enhancements ðŸ˜„.</p>

<p><a href="https://help.github.com/categories/collaborating-on-projects-using-issues-and-pull-requests/">More info on forks and the GitHub collaborative workflow</a> is available on the GitHub site.</p>

<h2 id="clone-and-install-the-repos-to-the-pi">Clone and Install the Repos to the Pi</h2>

<blockquote>
<p>On the Pi, clone your forks of the repos you want to work on, and install their deps:</p>
</blockquote>
<pre class="highlight shell_session"><code><span class="w">$ </span><span class="nc">git</span><span class="kv"> clone git@github.com:mygithubusername/Openframe.git
</span><span class="w">$ </span><span class="nc">git</span><span class="kv"> clone git@github.com:mygithubusername/Openframe-Image.git
</span><span class="w">$ </span><span class="nc">git</span><span class="kv"> clone git@github.com:mygithubusername/Openframe-MyNewExtension.git
</span><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe &amp;&amp; npm install
</span><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe-Image &amp;&amp; npm install
</span><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe-MyNewExtension &amp;&amp; npm install
</span></code></pre>
<blockquote>
<p>As a quick test, after all deps have installed, run Openframe from source:</p>
</blockquote>
<pre class="highlight shell_session"><code><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> start
</span></code></pre>
<p>Log into the Pi terminal, via SSH or directly, and <code class="prettyprint">git clone</code> your repos. You&rsquo;ll clone your forked Openframe repo, and whatever extension repos you&rsquo;re working on. These might be forks of existing extensions, or a repo for a new extension.</p>

<p>Once you&rsquo;ve got the source code for each project on the Pi, <code class="prettyprint">npm install</code> in each repo directory to install all of the dependencies. Some extensions take quite a while to install!</p>

<p>As a quick test, you can run the Openframe from the source code and make sure it works. Just go to the Openframe project dir and type <code class="prettyprint">npm start</code>. If you&rsquo;ve already logged in when you initially installed <code class="prettyprint">openframe</code>, the frame should start using the same credentials. It may ask if you want to autoboot, which you should decline.</p>

<h2 id="npm-link-the-extensions">NPM Link the Extensions</h2>

<blockquote>
<p>E.g., assuming you&rsquo;re working on the Openframe-Image extension, and you&rsquo;ve cloned all of the repos into the pi user&rsquo;s home folder:</p>
</blockquote>
<pre class="highlight shell_session"><code><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe-Image
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> link
</span><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe-MyNewExtension
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> link
</span><span class="w">$ </span><span class="nc">cd</span><span class="kv"> ~/Openframe
</span><span class="w">$ </span><span class="nc">npm</span><span class="kv"> link openframe-image openframe-mynewextension
</span></code></pre>
<p>Extensions are just Node packages, following standard NPM package practices. They are specified by their NPM package name, as defined in the <code class="prettyprint">package.json</code> file. The package name must be all lowercase, and as a convention should follow the pattern &#39;openframe-[extension-name]&rsquo;. For example, the Openframe-glslViewer extension has a <a href="https://github.com/OpenframeProject/Openframe-glslViewer/blob/master/package.json#L2">package name of &#39;openframe-glslviewer&rsquo;</a>.</p>

<p>If you are indeed working on extensions, you need to make sure that the local version of Openframe you&rsquo;re running is pulling in the local versions of the extensions. As this is a common need when developing inter-dependent projects, NPM provides a handy way of managing this. You&rsquo;ll use <a href="https://docs.npmjs.com/cli/link">NPM&rsquo;s link command</a> to create a global symlink for the dependencies, then use it again to tell the dependent project to use the symlinked version.</p>

<p>In each of the extension project directories, run <code class="prettyprint">npm link</code>. This will create the global symlink.</p>

<p>Then in the Openframe project directory, run <code class="prettyprint">npm link [extension-name] [another-extension-name]</code>, passing each package name (from <code class="prettyprint">package.json</code>) for the extension repos you&rsquo;ll be working on.</p>

<h2 id="get-to-work">Get to Work</h2>

<p>That&rsquo;s it! Now the Openframe project will point to the linked extensions, so changes to the extension&rsquo;s files will take effect immediately within the Openframe project. Great!</p>

<p>Whenever you make changes to files, you&rsquo;ll need to restart Openframe on the Pi by running <code class="prettyprint">npm start</code> in the Openframe project directory.</p>

<h2 id="debugging">Debugging</h2>

<p>Openframe uses (and encourages you to use!) the <a href="https://www.npmjs.com/package/debug">debug</a> package. You can see the debug output by specifying the <code class="prettyprint">DEBUG</code> env var when starting Openframe. E.g. to see <strong>all</strong> debug output:</p>
<pre class="highlight shell_session"><code><span class="w">$ </span><span class="nc">DEBUG=*</span><span class="kv"> npm start
</span></code></pre>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="Terminal">Terminal</a>
          </div>
      </div>
    </div>
  </body>
</html>
